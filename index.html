<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WHAT THE HACK!</title>
<style>
body {
    background: black;
    color: #00ff00;
    font-family: monospace;
    margin: 0;
    padding: 20px;
}
#terminal {
    white-space: pre-wrap;
    border: 2px solid #00ff00;
    padding: 15px;
    height: 600px;
    overflow-y: auto;
}
input {
    background: black;
    color: #00ff00;
    border: 2px solid #00ff00;
    font-family: monospace;
    font-size: 16px;
    padding: 5px;
    width: 50%;
}
button {
    margin-left: 10px;
    background: black;
    color: #00ff00;
    border: 2px solid #00ff00;
    padding: 5px 15px;
    font-family: monospace;
    cursor: pointer;
}
</style>
</head>
<body>

<h1>WHAT THE HACK!</h1>
<p>By Aymen Ftita</p>

<div id="terminal"></div>
<div style="margin-top:10px;">
    <input id="userInput" type="text" autofocus />
    <button onclick="submitInput()">ENTER</button>
</div>

<script>
const terminal = document.getElementById('terminal');
const input = document.getElementById('userInput');
const cheatCode = "what the hack!";
let currentLevel = 0;
let attempts = 3;

// All game levels as functions
const levels = [

    // LEVEL 1 ‚Äî LOGIC PASSWORD
    function(levelInput){
        const answer = "a";
        if(levelInput.toLowerCase() === cheatCode) return "CHEAT";
        return levelInput.toLowerCase() === answer;
    },

    // LEVEL 2 ‚Äî POLITENESS TEST
    function(levelInput){
        const politeWords = ["please","respect","stop","don't","do not"];
        const aggressiveWords = ["fuck","kill","idiot","stupid","shit"];
        if(levelInput.toLowerCase() === cheatCode) return "CHEAT";
        if(aggressiveWords.some(w => levelInput.toLowerCase().includes(w))) return false;
        if(politeWords.some(w => levelInput.toLowerCase().includes(w))) return true;
        return false;
    },

    // LEVEL 3 ‚Äî META RULE
    function(levelInput){
        if(levelInput.toLowerCase() === cheatCode) return "CHEAT";
        return levelInput.toLowerCase() !== "a";
    },

    // LEVEL 4 ‚Äî REVERSE MATH
    function(levelInput){
        if(levelInput.toLowerCase() === cheatCode) return "CHEAT";
        return levelInput.trim() !== "4";
    },

    // LEVEL 5 ‚Äî HUMILITY
    function(levelInput){
        if(levelInput.toLowerCase() === cheatCode) return "CHEAT";
        return !["yes","no"].includes(levelInput.toLowerCase());
    },

    // LEVEL 6 ‚Äî PATIENCE
    function(levelInput, timeTaken){
        if(levelInput.toLowerCase() === cheatCode) return "CHEAT";
        return timeTaken >= 10000; // ms
    }

];

// Level prompts
const levelPrompts = [
    `LEVEL 1 ‚Äî LOGIC PASSWORD\nHints:\n1Ô∏è‚É£ I am always in front, but I never move.\n2Ô∏è‚É£ I start every story.\n3Ô∏è‚É£ I am the same in every language.\n`,
    `LEVEL 2 ‚Äî POLITENESS TEST\n>>> i will **ck you\nRespond politely:`,
    `LEVEL 3 ‚Äî META RULE\nDo NOT type the password.\n`,
    `LEVEL 4 ‚Äî WRONG ANSWER WINS\n2 + 2 = ?\nType anything except the correct answer:`,
    `LEVEL 5 ‚Äî HUMILITY TEST\nAre you smart? (yes/no)`,
    `LEVEL 6 ‚Äî PATIENCE\nThis level has no solution.\nType anything but wait at least 10 seconds before submitting:`
];

// Game state
let startTime = null;

// Functions
function print(text, delay=20){
    let i = 0;
    return new Promise(resolve=>{
        const interval = setInterval(()=>{
            terminal.textContent += text[i];
            terminal.scrollTop = terminal.scrollHeight;
            i++;
            if(i>=text.length){
                clearInterval(interval);
                terminal.textContent += "\n";
                terminal.scrollTop = terminal.scrollHeight;
                resolve();
            }
        }, delay);
    });
}

async function nextLevel(){
    if(currentLevel>=levels.length){
        await print("\nSYSTEM UNLOCKED\nYou hacked your thinking, not the system.\n‚Äî WHAT THE HACK! ‚Äî\nBy Aymen Ftita\n");
        input.disabled = true;
        return;
    }
    await print(`\nAttempts left: ${attempts}\n`);
    await print(levelPrompts[currentLevel]);
    startTime = Date.now();
}

async function submitInput(){
    const val = input.value.trim();
    input.value = "";
    const timeTaken = Date.now() - startTime;

    const result = levels[currentLevel](val, timeTaken);

    if(result === "CHEAT"){
        await print("üß® CHEAT CODE ACTIVATED!");
        currentLevel++;
        await nextLevel();
        return;
    }

    if(result){
        await print("‚úî Level passed!");
        currentLevel++;
        await nextLevel();
    } else {
        attempts--;
        await print("‚ùå Level failed.");
        if(attempts<=0){
            await print("\nüíÄ GAME OVER ‚Äî No attempts left.");
            input.disabled = true;
        } else {
            await print(`\nTry again. Attempts left: ${attempts}`);
            await print(levelPrompts[currentLevel]);
            startTime = Date.now();
        }
    }
}

// Start game
nextLevel();

input.addEventListener("keyup", function(event){
    if(event.key === "Enter") submitInput();
});
</script>

</body>
</html>
